USE EXAMPLE1;

CREATE TABLE STUDENT1001(
	ID INT PRIMARY KEY,
    NAME VARCHAR(10)
);
CREATE TABLE BRANCH (
	ID INT PRIMARY KEY,
    S_ID INT,
    COURSE VARCHAR(10),
    
    FOREIGN KEY (S_ID) REFERENCES STUDENT1001(ID)
);
INSERT INTO STUDENT1001 VALUES (101,"S1"),(102,"S2");
INSERT INTO STUDENT1001 VALUES (103,"S3");
INSERT INTO BRANCH VALUES (1,101,"CSE"),(2,101,"ECE"),(3,102,"MECH");
DELETE FROM STUDENT1001 WHERE ID = 103;
-- CASCADE
CREATE TABLE STUDENT1002(
	ID INT PRIMARY KEY,
    NAME VARCHAR(10)
);
CREATE TABLE BRANCH1002 (
	ID INT PRIMARY KEY,
    S_ID INT,
    COURSE VARCHAR(10),
    
    FOREIGN KEY (S_ID) REFERENCES STUDENT1002(ID) ON DELETE CASCADE
);
INSERT INTO STUDENT1002 VALUES (101,"S1"),(102,"S2"),(103,"S3");
INSERT INTO BRANCH1002 VALUES (1,101,"CSE"),(2,101,"ECE"),(3,102,"MECH");

SELECT * FROM STUDENT1002;
SELECT * FROM BRANCH1002;
DELETE FROM STUDENT1002 WHERE ID = 103;
SELECT * FROM STUDENT1002;
SELECT * FROM BRANCH1002;
DELETE FROM STUDENT1002 WHERE ID = 101;
SELECT * FROM STUDENT1002;
SELECT * FROM BRANCH1002;

CREATE TABLE STUDENT1003(
	ID INT PRIMARY KEY,
    NAME VARCHAR(10)
);
CREATE TABLE BRANCH1003 (
	ID INT PRIMARY KEY,
    S_ID INT,
    COURSE VARCHAR(10),
    
    FOREIGN KEY (S_ID) REFERENCES STUDENT1003(ID) ON UPDATE CASCADE
);
INSERT INTO STUDENT1003 VALUES (101,"S1"),(102,"S2"),(103,"S3");
INSERT INTO BRANCH1003 VALUES (1,101,"CSE"),(2,101,"ECE"),(3,102,"MECH");
SET SQL_SAFE_UPDATES = 0;
UPDATE STUDENT1003 SET ID = 3 WHERE NAME = "S3";
UPDATE STUDENT1003 SET ID = 1 WHERE NAME = "S1";
SELECT * FROM STUDENT1003;
SELECT * FROM BRANCH1003;

CREATE TABLE STUDENT1004(
	ID INT PRIMARY KEY,
    NAME VARCHAR(10)
);
CREATE TABLE BRANCH1004 (
	ID INT PRIMARY KEY,
    S_ID INT,
    COURSE VARCHAR(10),
    
    FOREIGN KEY (S_ID) REFERENCES STUDENT1004(ID) ON DELETE CASCADE ON UPDATE CASCADE
);
INSERT INTO STUDENT1004 VALUES (101,"S1"),(102,"S2"),(103,"S3");
INSERT INTO BRANCH1004 VALUES (1,101,"CSE"),(2,101,"ECE"),(3,102,"MECH"),(4,103,"EEE");
SELECT * FROM STUDENT1004;
SELECT * FROM BRANCH1004;
DELETE FROM STUDENT1004 WHERE ID = 103;
UPDATE STUDENT1004 SET ID = 1 WHERE NAME = "S1";

-- SET NULL
CREATE TABLE STUDENT1005(
	ID INT PRIMARY KEY,
    NAME VARCHAR(10)
);
CREATE TABLE BRANCH1005 (
	ID INT PRIMARY KEY,
    S_ID INT,
    COURSE VARCHAR(10),
    
    FOREIGN KEY (S_ID) REFERENCES STUDENT1005(ID) ON DELETE SET NULL
);
INSERT INTO STUDENT1005 VALUES (101,"S1"),(102,"S2"),(103,"S3");
INSERT INTO BRANCH1005 VALUES (1,101,"CSE"),(2,101,"ECE"),(3,102,"MECH");

SELECT * FROM STUDENT1005;
SELECT * FROM BRANCH1005;
DELETE FROM STUDENT1005 WHERE ID = 103;
SELECT * FROM STUDENT1005;
SELECT * FROM BRANCH1005;
DELETE FROM STUDENT1005 WHERE ID = 101;
SELECT * FROM STUDENT1005;
SELECT * FROM BRANCH1005;
UPDATE STUDENT1005 SET ID = 2 WHERE NAME = "S2";


CREATE TABLE STUDENT1006(
	ID INT PRIMARY KEY,
    NAME VARCHAR(10)
);
CREATE TABLE BRANCH1006 (
	ID INT PRIMARY KEY,
    S_ID INT,
    COURSE VARCHAR(10),
    
    FOREIGN KEY (S_ID) REFERENCES STUDENT1006(ID) ON UPDATE SET NULL
);
INSERT INTO STUDENT1006 VALUES (101,"S1"),(102,"S2"),(103,"S3");
INSERT INTO BRANCH1006 VALUES (1,101,"CSE"),(2,101,"ECE"),(3,102,"MECH");
SELECT * FROM STUDENT1006;
SELECT * FROM BRANCH1006;
UPDATE STUDENT1006 SET ID = 2 WHERE NAME = "S2";
SELECT * FROM STUDENT1006;
SELECT * FROM BRANCH1006;
DELETE FROM STUDENT1006 WHERE ID = 101;
SELECT * FROM STUDENT1005;

CREATE TABLE STUDENT1007(
	ID INT PRIMARY KEY,
    NAME VARCHAR(10)
);
CREATE TABLE BRANCH1007 (
	ID INT PRIMARY KEY,
    S_ID INT,
    COURSE VARCHAR(10),
    
    FOREIGN KEY (S_ID) REFERENCES STUDENT1007(ID) ON UPDATE SET NULL ON DELETE SET NULL
);
INSERT INTO STUDENT1007 VALUES (101,"S1"),(102,"S2"),(103,"S3");
INSERT INTO BRANCH1007 VALUES (1,101,"CSE"),(2,101,"ECE"),(3,102,"MECH");

SELECT * FROM STUDENT1007;
SELECT * FROM BRANCH1007;

UPDATE STUDENT1007 SET ID = 2 WHERE NAME = "S2";

SELECT * FROM STUDENT1007;
SELECT * FROM BRANCH1007;

DELETE FROM STUDENT1007 WHERE ID = 101;

SELECT * FROM STUDENT1007;
SELECT * FROM BRANCH1007;

-- 

